<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metropolia Job Matcher</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        body { 
            background-color: #f0f2f5; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .hero-section { 
            background: linear-gradient(135deg, #0066cc 0%, #0099ff 100%); 
            color: white; 
            padding-top: 60px;
            padding-bottom: 100px; /* Ù…Ø³Ø§ÙØ© Ø¹Ø´Ø§Ù† Ø§Ù„ÙƒØ±ÙˆØª ØªØ¯Ø®Ù„ ÙÙŠÙ‡ */
            border-radius: 0 0 50px 50px; 
            box-shadow: 0 4px 20px rgba(0, 102, 204, 0.3); 
            text-align: center;
        }

        /* Ø±ÙØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„Ù„Ø£Ø¹Ù„Ù‰ */
        .main-content {
            margin-top: -60px; 
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„ÙƒØ±ÙˆØª */
        .card-custom {
            border: none;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            background: white;
            overflow: hidden;
            margin-bottom: 25px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„ÙƒØ±ÙˆØª */
        }

        /* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .section-header {
            font-weight: 700;
            color: #444;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .section-header i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        /* Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¯Ø±Ø¬Ø© */
        .score-circle { 
            width: 140px; 
            height: 140px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            margin: 0 auto; 
            font-size: 3.5rem; 
            font-weight: 800; 
            color: white; 
            box-shadow: 0 6px 15px rgba(0,0,0,0.15); 
            border: 6px solid white;
        }

        /* ØªØ­Ø³ÙŠÙ† Ø´ÙƒÙ„ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… */
        .list-group-item {
            border: none;
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 10px !important;
            background-color: #f8f9fa;
        }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Øµ Ù„Ù„Ù€ Job Description */
        .job-card {
            border-left: 5px solid #0066cc;
        }
    </style>
</head>
<body>

<div class="hero-section">
    <div class="container">
        <h1 class="fw-bold display-5">ğŸ¯ AI Job Matcher</h1>
        <p class="lead opacity-90">Paste a Job Description & Upload your CV to see if you match!</p>
    </div>
</div>

<div class="container main-content pb-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            
            <form method="POST" enctype="multipart/form-data">
                
                <div class="card card-custom job-card p-4">
                    <div class="card-body">
                        <div class="section-header text-primary">
                            <i class="fas fa-briefcase"></i>
                            <h5>Target Job Description (Optional)</h5>
                        </div>
                        <p class="text-muted small mb-2">Paste the job post here. If empty, we will just audit your CV generally.</p>
                        <textarea class="form-control bg-light border-0" name="job_desc" rows="5" placeholder="e.g. 'We are looking for a Python Developer with Flask experience...'"></textarea>
                    </div>
                </div>

                <div class="card card-custom p-4">
                    <div class="card-body">
                        <div class="section-header">
                            <i class="fas fa-user-circle"></i>
                            <h5>Your CV / Resume</h5>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold small text-muted">UPLOAD FILE (PDF/DOCX)</label>
                            <input class="form-control form-control-lg" type="file" name="cv_file" accept=".pdf,.docx,.txt">
                        </div>

                        <div class="text-center text-muted fw-bold my-3">- OR -</div>

                        <div class="mb-4">
                            <textarea class="form-control bg-light border-0" name="cv_text" rows="4" placeholder="Paste your CV text here directly...">{{ cv_text if cv_text else '' }}</textarea>
                        </div>

                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary btn-lg flex-grow-1 rounded-pill fw-bold shadow-sm">
                                <i class="fas fa-magic me-2"></i> Analyze Match
                            </button>
                            <a href="/" class="btn btn-outline-secondary btn-lg rounded-pill px-4" title="Start Over">
                                <i class="fas fa-rotate-right"></i>
                            </a>
                        </div>
                        
                        {% if error_msg %}
                        <div class="alert alert-danger mt-3 text-center rounded-3">{{ error_msg }}</div>
                        {% endif %}
                    </div>
                </div>

            </form>

            {% if feedback %}
            <div id="results-area" class="animate-fade-in">
                
                <div class="card card-custom text-center p-4">
                    <h5 class="text-uppercase text-muted letter-spacing-2 mb-4">
                        {% if job_desc %} Job Match Score {% else %} CV Strength Score {% endif %}
                    </h5>
                    
                    <div class="score-circle mb-3" 
                         style="background-color: {% if feedback.score >= 80 %}#198754{% elif feedback.score >= 50 %}#ffc107{% else %}#dc3545{% endif %};">
                        {{ feedback.score }}%
                    </div>
                    
                    <h3 class="fw-bold" style="color: {% if feedback.score >= 80 %}#198754{% elif feedback.score >= 50 %}#ffc107{% else %}#dc3545{% endif %};">
                        {{ feedback.summary }}
                    </h3>
                </div>

                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card card-custom h-100 p-3 border-start border-5 border-success">
                            <h5 class="fw-bold text-success mb-3">
                                <i class="fas fa-check-circle me-2"></i>
                                {% if job_desc %} Matching Skills {% else %} Strengths {% endif %}
                            </h5>
                            {% if feedback.strengths %}
                            <ul class="list-group list-group-flush">
                                {% for item in feedback.strengths %}
                                <li class="list-group-item"><i class="fas fa-check text-success me-2"></i>{{ item }}</li>
                                {% endfor %}
                            </ul>
                            {% else %}
                            <p class="text-muted small">No specific matches found.</p>
                            {% endif %}
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card card-custom h-100 p-3 border-start border-5 border-danger">
                            <h5 class="fw-bold text-danger mb-3">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                {% if job_desc %} Missing Skills {% else %} Improvements {% endif %}
                            </h5>
                            <ul class="list-group list-group-flush">
                                {% for item in feedback.weaknesses %}
                                <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i>{{ item }}</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="card card-custom mt-4 p-4 border-start border-5 border-primary">
                    <h5 class="fw-bold text-primary mb-3"><i class="fas fa-lightbulb me-2"></i>Action Plan</h5>
                    <ul class="mb-0 ps-3">
                        {% for tip in feedback.improvements %}
                        <li class="mb-2 text-secondary">{{ tip }}</li>
                        {% endfor %}
                    </ul>
                </div>

            </div>
            {% endif %}

        </div>
    </div>
</div>

<footer class="text-center py-5 text-muted small">
    <p>Developed for Metropolia R&D Project</p>
</footer>

</body>
</html>