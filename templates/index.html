<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metropolia AI Job Matcher</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { 
            background-color: #ffffff; 
            font-family: 'Open Sans', sans-serif; 
            color: #333;
        }
        
        .metropolia-top-bar {
            height: 5px;
            background-color: #ff5000;
            width: 100%;
        }
        
        .hero-section { 
            background-color: #ffffff; 
            padding-top: 40px;
            padding-bottom: 40px; 
            border-bottom: 1px solid #eee;
            margin-bottom: 40px;
        }

        .brand-title {
            font-weight: 700;
            color: #000;
            font-size: 2.5rem;
        }

        .brand-subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-top: 10px;
        }

        .highlight-orange {
            color: #ff5000;
        }

        .card-custom {
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            background: white;
            margin-bottom: 25px;
        }

        .section-header {
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            border-bottom: 2px solid #ff5000;
            padding-bottom: 10px;
            width: fit-content;
        }
        
        .section-header i {
            margin-right: 10px;
            color: #ff5000;
        }

        .btn-metropolia {
            background-color: #ff5000;
            color: white;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        .btn-metropolia:hover {
            background-color: #e04500;
            color: white;
        }
        
        .btn-outline-metropolia {
            border: 2px solid #ccc;
            color: #666;
            border-radius: 4px;
        }
        .btn-outline-metropolia:hover {
            border-color: #333;
            color: #333;
            background-color: transparent;
        }

        .score-circle { 
            width: 140px; 
            height: 140px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            margin: 0 auto; 
            font-size: 3.5rem; 
            font-weight: 800; 
            color: white; 
            box-shadow: 0 6px 15px rgba(0,0,0,0.1); 
        }

        .list-group-item {
            border: none;
            padding: 12px 15px;
            margin-bottom: 5px;
            background-color: #f9f9f9;
            border-left: 3px solid transparent;
        }
        
        .border-start-success { border-left-color: #198754 !important; }
        .border-start-danger { border-left-color: #dc3545 !important; }
        .text-metropolia { color: #ff5000; }
    </style>
</head>
<body>

<div class="metropolia-top-bar"></div>

<div class="hero-section">
    <div class="container text-center">
        <h1 class="brand-title">Metropolia <span class="highlight-orange">AI Job Matcher</span></h1>
        <p class="brand-subtitle">Empowering students to bridge the gap between education and the Finnish job market.</p>
    </div>
</div>

<div class="container pb-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            
            <form method="POST" enctype="multipart/form-data">
                
                <div class="card card-custom p-4">
                    <div class="card-body">
                        <div class="section-header">
                            <i class="fas fa-briefcase"></i>
                            <h5>Target Job Description</h5>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label fw-bold small text-muted">UPLOAD JOB FILE (PDF/DOCX)</label>
                            <input class="form-control" type="file" name="job_file" accept=".pdf,.docx,.txt">
                        </div>

                        <div class="text-center text-muted fw-bold my-3">- OR -</div>

                        <div class="mb-2">
                            <textarea class="form-control bg-light border-0" name="job_desc" rows="4" placeholder="Paste the job advertisement here (Optional)...">{{ job_desc }}</textarea>
                        </div>
                    </div>
                </div>

                <div class="card card-custom p-4">
                    <div class="card-body">
                        <div class="section-header">
                            <i class="fas fa-user-graduate"></i>
                            <h5>Your CV / Resume</h5>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold small text-muted">UPLOAD CV FILE (PDF/DOCX)</label>
                            <input class="form-control form-control-lg" type="file" name="cv_file" accept=".pdf,.docx,.txt">
                        </div>

                        <div class="text-center text-muted fw-bold my-3">- OR -</div>

                        <div class="mb-4">
                            <textarea class="form-control bg-light border-0" name="cv_text" rows="4" placeholder="Paste your CV text here directly...">{{ cv_text if cv_text else '' }}</textarea>
                        </div>

                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-metropolia btn-lg flex-grow-1 shadow-sm">
                                ANALYZE MATCH
                            </button>
                            <a href="/" class="btn btn-outline-metropolia btn-lg px-4" title="Start Over">
                                <i class="fas fa-rotate-right"></i>
                            </a>
                        </div>
                        
                        {% if error_msg %}
                        <div class="alert alert-danger mt-3 text-center rounded-1">{{ error_msg }}</div>
                        {% endif %}
                    </div>
                </div>

            </form>

            {% if feedback %}
            <div id="results-area" class="animate-fade-in">
                
                <div class="card card-custom text-center p-5">
                    <h6 class="text-uppercase text-muted mb-4">
                        {% if job_desc %} MATCH COMPATIBILITY {% else %} CV STRENGTH {% endif %}
                    </h6>
                    
                    <div class="score-circle mb-3" 
                         style="background-color: {% if feedback.score >= 80 %}#198754{% elif feedback.score >= 50 %}#ffc107{% else %}#dc3545{% endif %};">
                        {{ feedback.score }}%
                    </div>
                    
                    <h3 class="fw-bold" style="color: {% if feedback.score >= 80 %}#198754{% elif feedback.score >= 50 %}#ffc107{% else %}#dc3545{% endif %};">
                        {{ feedback.summary }}
                    </h3>
                </div>

                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card card-custom h-100 p-4">
                            <h6 class="fw-bold text-success mb-3">
                                <i class="fas fa-check-circle me-2"></i>
                                {% if job_desc %} MATCHING SKILLS {% else %} STRENGTHS {% endif %}
                            </h6>
                            {% if feedback.strengths %}
                            <ul class="list-group list-group-flush">
                                {% for item in feedback.strengths %}
                                <li class="list-group-item border-start-success"><small>{{ item }}</small></li>
                                {% endfor %}
                            </ul>
                            {% else %}
                            <p class="text-muted small">No specific matches found.</p>
                            {% endif %}
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card card-custom h-100 p-4">
                            <h6 class="fw-bold text-danger mb-3">
                                <i class="fas fa-exclamation-circle me-2"></i>
                                {% if job_desc %} MISSING SKILLS {% else %} IMPROVEMENTS {% endif %}
                            </h6>
                            <ul class="list-group list-group-flush">
                                {% for item in feedback.weaknesses %}
                                <li class="list-group-item border-start-danger"><small>{{ item }}</small></li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="card card-custom mt-4 p-4 border-start border-4 border-warning">
                    <h6 class="fw-bold text-dark mb-3"><i class="fas fa-lightbulb me-2 text-warning"></i>RECOMMENDED ACTIONS</h6>
                    <ul class="mb-0 ps-3">
                        {% for tip in feedback.improvements %}
                        <li class="mb-2 text-secondary">{{ tip }}</li>
                        {% endfor %}
                    </ul>
                </div>

            </div>
            {% endif %}

        </div>
    </div>
</div>

<footer class="text-center py-5 text-muted small border-top mt-5">
    <p>Â© 2025 Metropolia UAS Project. Built by Anas Abdelrahim for R&D Projects.</p>
</footer>

</body>
</html>